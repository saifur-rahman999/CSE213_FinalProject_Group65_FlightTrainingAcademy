<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.cse213_finalproject_group65_flighttrainingacademy.TrainingRecordsOfficer.TrainingAnalytics"
            prefHeight="680.0" prefWidth="900.0">

    <children>
        <VBox spacing="10" AnchorPane.topAnchor="10" AnchorPane.leftAnchor="10"
              AnchorPane.rightAnchor="10" AnchorPane.bottomAnchor="10">
            <children>

                <Label text="Training Analytics (TRO â€” Goal 7)"
                       style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                <!-- Filters -->
                <GridPane hgap="10" vgap="8">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="15"/>
                        <ColumnConstraints percentWidth="20"/>
                        <ColumnConstraints percentWidth="15"/>
                        <ColumnConstraints percentWidth="20"/>
                        <ColumnConstraints percentWidth="30"/>
                    </columnConstraints>
                    <children>
                        <Label text="From:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <DatePicker fx:id="fromDatePicker" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                        <Label text="To:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                        <DatePicker fx:id="toDatePicker" GridPane.rowIndex="0" GridPane.columnIndex="3"/>

                        <HBox spacing="8" alignment="CENTER_LEFT" GridPane.rowIndex="1" GridPane.columnIndex="0"
                              GridPane.columnSpan="5">
                            <children>
                                <Label text="Aircraft/Device:"/>
                                <ComboBox fx:id="aircraftCombo" prefWidth="200" promptText="(All)"/>
                                <Label text="Instructor:"/>
                                <ComboBox fx:id="instructorCombo" prefWidth="200" promptText="(All)"/>
                                <Button fx:id="runBtn" text="Run Analytics" onAction="#onRun"/>
                                <Button fx:id="exportBtn" text="Export" onAction="#onExport"/>
                            </children>
                        </HBox>
                    </children>
                </GridPane>

                <!-- KPIs -->
                <HBox spacing="20">
                    <children>
                        <Label text="Total Hours:"/>
                        <Label fx:id="totalHoursLabel" text="0"/>
                        <Label text="Avg Duration (hrs):"/>
                        <Label fx:id="avgDurationLabel" text="0"/>
                        <Label text="Pass Rate:"/>
                        <Label fx:id="passRateLabel" text="0%"/>
                        <Label text="Sim Mix:"/>
                        <Label fx:id="simMixLabel" text="0%"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="messageLabel" textFill="GREEN"/>
                    </children>
                </HBox>

                <!-- Table -->
                <TableView fx:id="analyticsTable" prefHeight="220">
                    <columns>
                        <TableColumn fx:id="colGroup" text="Group" prefWidth="180"/>
                        <TableColumn fx:id="colHours" text="Hours" prefWidth="120"/>
                        <TableColumn fx:id="colSessions" text="Sessions" prefWidth="120"/>
                        <TableColumn fx:id="colPassRate" text="Pass Rate" prefWidth="120"/>
                    </columns>
                </TableView>

                <!-- Charts -->
                <SplitPane dividerPositions="0.5">
                    <items>
                        <BarChart fx:id="hoursBarChart">
                            <xAxis>
                                <CategoryAxis label="Month"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis label="Hours"/>
                            </yAxis>
                        </BarChart>
                        <PieChart fx:id="usagePieChart"/>
                    </items>
                </SplitPane>

            </children>
        </VBox>
    </children>
</AnchorPane>
